var $f=$f||{};
(function(){var l=function(a,c){var g=function(a,c,b,d){var f;if(jQuery.isArray(c))jQuery.each(c,function(c,k){b||rbracket.test(a)?d(a,k):g(a+"["+("object"===typeof k?c:"")+"]",k,b,d)});else if(b||"object"!==jQuery.type(c))d(a,c);else for(f in c)g(a+"["+f+"]",c[f],b,d)},b,d=[],f=function(a,b){c&&void 0===(b=c(a,b))||(b=jQuery.isFunction(b)?b():null==b?"":b,d[d.length]=h(a)+"="+h(b))};if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){f(this.name,this.value)});else for(b in a)g(b,
a[b],void 0,f);return d.join("&").replace(/%20/g,"+")},h=function(a){return"UTF-8"!=$f.charset?encodeURIComponent(escape(a).replace(/%u[A-F0-9]{4}/g,function(a){return"&#"+parseInt(a.substr(2),16)+";"})).replace(/%25/g,"%"):encodeURIComponent(a)},b=_userdata||{};$f.page_type=function(){var a=location.pathname;return/^\/t[1-9][0-9]*(p[1-9][0-9]*)?-/.test(a)?"topic":/^\/f[1-9][0-9]*(p[1-9][0-9]*)?-/.test(a)?"forum":$("#i_icon_mini_index").parent().attr("href")==a?"index":/^\/c[1-9][0-9]*-/.test(a)?
"category":""}();$f.id=function(){var a=location.pathname,c=a.match(/^\/[tfc]([1-9][0-9]*)(p[1-9][0-9]*)?-/);c||(c=a.match(/^\/u([1-9][0-9]*)[a-z]*$/));return c?+c[1]:0}();$f.page_num=function(){var a=location.pathname.match(/^\/[tf][1-9][0-9]*(p[1-9][0-9]*)-/);return a?+a[1]:0}();$f.charset=(document.charset?document.charset:document.characterSet).toUpperCase();$f.tid=$("input[name=tid]:first").val()||($("a[href*='&tid=']:first").attr("href")||"").replace(/^.*&tid=([a-z0-9]*)?.*$/,"$1");$f.user_id=
b.user_id;$f.username=b.username;$f.is_guest=!b.session_logged_in;$f.is_admin=1==b.user_level;$f.is_mod=0<b.user_level;$f.lang=b.lang;$f.avatar=b.avatar;$f.num_posts=b.user_posts;$f.num_pms=b.user_nb_privmsg;$f.num_reps=b.point_reputation;$f.send_pm=function(a,c,b,h){$.post("/privmsg",l({username:username,subject:c,message:b,mode:"post",post:1}),e)};$f.get_post_data=function(a,c){c&&$.get("/post?p="+a+"&mode=editpost",function(a){c($('form[name="post"]',a).serializeArray())})};$f.modify_post=function(a,
c){$f.post.get_form(a,function(a){$.post("/post",l(a,c)+"&post=1")})};$f.delete_post=function(a,c){$.post("/post",{p:a,mode:"delete",confirm:""},c)};$f.reply_topic=function(a,c,b){$.post("/post",{subject:"",message:c,mode:"reply",t:a,post:1,notify:0},b)};$f.split_topic=function(a,c,b,h,d,f){a={subject:a,new_forum_id:"f"+c,post_id_list:b,t:h,mode:"split"};a["split_type_"+(d?"beyond":"all")]=1;"object"!=typeof p&&(p=[p]);$.post("/modcp?tid="+$f.tid,a,f)};$f.delete_topic=function(a,b){$.post("/modcp?tid="+
$f.tid,{t:a,mode:"delete",confirm:1},b)};$f.move_topic=function(a,b,g){"trash"==b?$.get("/modcp?mode=trash&t="+a+"&tid="+$f.tid,g):$.post("/modcp?tid="+$f.tid,{tid:$f.tid,newforum:"f"+b,mode:"move",t:a,confirm:1},g)}})();

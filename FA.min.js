var $f=$f||{};
(function(){var k=function(a,c){var d=function(a,c,b,e){var f;if(jQuery.isArray(c))jQuery.each(c,function(c,h){b||rbracket.test(a)?e(a,h):d(a+"["+("object"===typeof h?c:"")+"]",h,b,e)});else if(b||"object"!==jQuery.type(c))e(a,c);else for(f in c)d(a+"["+f+"]",c[f],b,e)},b,e=[],f=function(a,d){var b;if(c){if(null===(b=c(a,d)))return;void 0!==b&&(d=b)}d=jQuery.isFunction(d)?d():null==d?"":d;e[e.length]=g(a)+"="+g(d)};if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){f(this.name,
this.value)});else for(b in a)d(b,a[b],void 0,f);return e.join("&").replace(/%20/g,"+")},g=function(a){return"UTF-8"!=$f.charset?encodeURIComponent(escape(a).replace(/%u[A-F0-9]{4}/g,function(a){return"&#"+parseInt(a.substr(2),16)+";"})).replace(/%25/g,"%"):encodeURIComponent(a)},b=_userdata||{};$f.page_type=function(){var a=location.pathname;return/^\/t[1-9][0-9]*(p[1-9][0-9]*)?-/.test(a)?"topic":/^\/f[1-9][0-9]*(p[1-9][0-9]*)?-/.test(a)?"forum":$("#i_icon_mini_index").parent().attr("href")==a?"index":
/^\/c[1-9][0-9]*-/.test(a)?"category":""}();$f.id=function(){var a=location.pathname,c=a.match(/^\/[tfc]([1-9][0-9]*)(p[1-9][0-9]*)?-/);c||(c=a.match(/^\/u([1-9][0-9]*)[a-z]*$/));return c?+c[1]:0}();$f.page_num=function(){var a=location.pathname.match(/^\/[tf][1-9][0-9]*(p[1-9][0-9]*)-/);return a?+a[1]:0}();$f.charset=(document.charset?document.charset:document.characterSet).toUpperCase();$f.tid=$("input[name=tid]:first").val()||($("a[href*='&tid=']:first").attr("href")||"").replace(/^.*&tid=([a-z0-9]*)?.*$/,
"$1");$f.user_id=b.user_id;$f.username=b.username;$f.is_guest=!b.session_logged_in;$f.is_admin=1==b.user_level;$f.is_mod=0<b.user_level;$f.lang=b.lang;$f.avatar=b.avatar;$f.num_posts=b.user_posts;$f.num_pms=b.user_nb_privmsg;$f.num_reps=b.point_reputation;$f.send_pm=function(a,c,d,b){$.post("/privmsg",k({username:a,subject:c,message:d,mode:"post",post:1}),b)};$f.get_post_data=function(a,c){c&&$.get("/post?p="+a+"&mode=editpost",function(a){c($('form[name="post"]',a).serializeArray())})};$f.modify_post=
function(a,c){$f.get_post_data(a,function(a){$.post("/post",k(a,c)+"&post=1")})};$f.delete_post=function(a,c){$.post("/post",{p:a,mode:"delete",confirm:""},c)};$f.reply_topic=function(a,c,b){$.post("/post",{subject:"",message:c,mode:"reply",t:a,post:1,notify:0},b)};$f.split_topic=function(a,c,b,g,e,f){"object"!=typeof b&&(b=[b]);a={subject:a,new_forum_id:"f"+c,post_id_list:b,t:g,mode:"split"};a["split_type_"+(e?"beyond":"all")]=1;$.post("/modcp?tid="+$f.tid,a,f)};$f.delete_topic=function(a,c){$.post("/modcp?tid="+
$f.tid,{t:a,mode:"delete",confirm:1},c)};$f.move_topic=function(a,c,b){"trash"==c?$.get("/modcp?mode=trash&t="+a+"&tid="+$f.tid,b):$.post("/modcp?tid="+$f.tid,{tid:$f.tid,newforum:"f"+c,mode:"move",t:a,confirm:1},b)}})();

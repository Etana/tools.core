$(function(b){var l=function(a,b){var c=function(a,b,d,e){var g;if(jQuery.isArray(b))jQuery.each(b,function(b,g){d||/\[\]$/.test(a)?e(a,g):c(a+"["+("object"===typeof g?b:"")+"]",g,d,e)});else if(d||"object"!==jQuery.type(b))e(a,b);else for(g in b)c(a+"["+g+"]",b[g],d,e)},e,g=[],f=function(a,c){var e;if(b){if(null===(e=b(a,c)))return;void 0!==e&&(c=e)}c=jQuery.isFunction(c)?c():null==c?"":c;g[g.length]=k(a)+"="+k(c)};if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){f(this.name,
this.value)});else for(e in a)c(e,a[e],void 0,f);return g.join("&").replace(/%20/g,"+")},k=function(a){return"utf-8"!=$page.charset?encodeURIComponent(escape(a).replace(/%u[A-F0-9]{4}/g,function(a){return"&#"+parseInt(a.substr(2),16)+";"})).replace(/%25/g,"%"):encodeURIComponent(a)},f=_userdata||{},m=function(a,d){d&&b.get("/admin/index.forum?part=general&sub=general&mode=edit&tid="+$user.tid+"&fid="+a,function(a){d(b('form[name="edit"]',a).serializeArray())})},n=function(a,d){d&&b.get("/post?p="+
a+"&mode=editpost",function(a){d(b('form[name="post"]',a).serializeArray())})},h=function(a,d){var c={};if(0==a.length)return!1;for(var e=0;e<d.length&&e<a.length&&!b.isPlainObject(a[e]);e++)c[d[e]]=a[e];a.length>e&&b.isPlainObject(a[e])&&b.extend(c,a[e]);b.each(c,function(a,d){b.isFunction(d)||(c[a]=function(){return d})});return c};b.each({$forum:{post:function(){for(var a=["subject","message"],d=h(arguments,a),c=0;c<a.length;c++)if(!(a[c]in d))return;b.each(this._d,function(a,c){b.post("/post",
b.extend({notify:0},d,{post:1,mode:"newtopic",f:c}))})},change:function(){var a=h(arguments,["name","desc"]);a&&b.each(this._d,function(d,c){if("string"!==b.type(c)||"c"!=c[0])c="f"+c;m(c,function(d){b.post("/admin/index.forum?part=general&sub=general&mode=edit&fid="+c+"&tid="+$user.tid,l(d,function(b,c){if(b in a)return a[b](c)})+"&update=1")})})}},$topic:{post:function(){for(var a=["message"],d=h(arguments,a),c=0;c<a.length;c++)if(!(a[c]in d))return;b.each(this._d,function(a,c){b.post("/post",b.extend({notify:0},
d,{post:1,mode:"reply",t:c}))})},remove:function(a){b.each(this._d,function(a,c){b.post("/modcp?tid="+$user.tid,{t:c,mode:"delete",confirm:1})})},move:function(a,d){b.each(this._d,function(c,e){b.post("/modcp?tid="+$user.tid,{tid:$user.tid,new_forum:"f"+a,mode:"move",t:this._d[0],confirm:1},d)})},trash:function(a){b.each(this._d,function(d,c){b.get("/modcp?mode=trash&t="+c+"&tid="+$user.tid,a)})},merge:function(a){!a&&this._d.length&&(a=this._d.splice(-1)[0]);b.each(this._d,function(d,c){b.post("/merge",
{tid:$user.tid,from_topic:c,to_topic:a,submit:1,f:1,confirm:1})})},lock:function(){b.each(this._d,function(a,d){b.get("/modcp?mode=lock&t="+d+"&tid="+$user.tid)})},unlock:function(){b.each(this._d,function(a,d){b.get("/modcp?mode=unlock&t="+d+"&tid="+$user.tid)})},split:function(a,d,c,e){b.isArray(c)||(c=[c]);a={subject:a,new_forum_id:"f"+d,post_id_list:c,t:this._d[0],mode:"split"};a["split_type_"+(split_beyond?"beyond":"all")]=1;b.post("/modcp?tid="+$user.tid,a)}},$post:{remove:function(a){b.each(this._d,
function(d,c){b.post("/post",{p:c,mode:"delete",confirm:""},a)})},change:function(){var a=h(arguments,["message"]);a&&b.each(this._d,function(d,c){n(c,function(c){b.post("/post",l(c,function(c,b){if(c in a)return a[c](b)})+"&post=1")})})}},$user:{pm:function(a){for(var d=["subject","message"],c=h(arguments,d),e=0;e<d.length;e++)if(!(d[e]in c))return;b.post("/privmsg",b.extend(c,{username:this._d,mode:"post",post:1}))},ban:function(){h(arguments,["ban_user_date","ban_user_reason"]);b.each(this._d,
function(a,d){b.post("/modcp?tid="+$user.tid,{tid:$user.tid,confirm:1,mode:"ban",user_id:9})})},unban:function(){b.post("/admin/index.forum?part=users_groups&sub=users&mode=ban_control&extended_admin=1&tid="+$user.tid,{users_to_unban:this._d,unban_users:1})}}},function(a,d){window[a]=function(){var c=b.makeArray(arguments);1==c.length&&b.isArray(c[0])&&(c=c[0]);return b.extend(window[a]||{},d,{_d:c,_t:a})}});window.$page=window.$page||{};window.$user=window.$user||{};$page.type=function(){var a=location.pathname;
return/^\/t[1-9][0-9]*(p[1-9][0-9]*)?-/.test(a)?"topic":/^\/f[1-9][0-9]*(p[1-9][0-9]*)?-/.test(a)?"forum":b("#i_icon_mini_index").parent().attr("href")==a?"index":/^\/c[1-9][0-9]*-/.test(a)?"category":""}();$page.id=function(){var a=location.pathname,b=a.match(/^\/[tfc]([1-9][0-9]*)(p[1-9][0-9]*)?-/);b||(b=a.match(/^\/u([1-9][0-9]*)[a-z]*$/));return b?+b[1]:0}();$page.num=function(){var a=location.pathname.match(/^\/[tf][1-9][0-9]*(p[1-9][0-9]*)-/);return a?+a[1]:0}();$page.charset=(document.charset?
document.charset:document.characterSet).toUpperCase();$user.tid=b("input[name=tid]:first").val()||(b("a[href*='&tid=']:first").attr("href")||"").replace(/^.*&tid=([a-z0-9]*)?.*$/,"$1");$user.id=f.user_id;$user.name=f.username;$user.guest=!f.session_logged_in;$user.admin=1==f.user_level;$user.mod=0<f.user_level;$user.lang=f.lang;$user.avatar=f.avatar;$user.num_post=f.user_posts;$user.num_pm=f.user_nb_privmsg;$user.num_reputation=f.point_reputation});
